{"version":3,"sources":["actions/bootbox.js","components/bootbox.js"],"names":["dmx","getModboxOptions","type","options","newOptions","backdrop","body","message","title","size","animate","fade","closeButton","showHeaderClose","swapButtonOrder","centerVertical","center","scrollable","buttons","ok","label","className","style","replace","confirm","okButton","cancel","inputType","input","multiple","required","inputOptions","map","option","value","text","join","index","rows","placeholder","autocomplete","minlength","maxlength","min","max","step","pattern","trim","Actions","modbox","alert","this","parse","info","success","warning","danger","condition","then","Object","assign","else","_exec","catch","_options","extend","destroyOnClose","defaultButton","Promise","resolve","box","inputEl","modalEl","querySelector","checked","close","callback","reportValidity","nodeName","Array","from","selectedOptions","checkedEl","querySelectorAll","el","hide","okBtn","addButton","addEventListener","event","key","click","addEvent","show","Component","methods"],"mappings":"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","file":"../dmxBootbox5/dmxBootbox5.js","sourcesContent":["dmx.getModboxOptions = (type, options) => {\r\n  const newOptions = {\r\n    backdrop: 'static'\r\n  };\r\n\r\n  newOptions.body = options.message;\r\n\r\n  if (options.title) {\r\n    newOptions.title = options.title;\r\n  }\r\n\r\n  if (options.size) {\r\n    newOptions.size = options.size;\r\n  }\r\n\r\n  if (options.backdrop != null) {\r\n    if (options.backdrop === true || options.backdrop === 'true') {\r\n      newOptions.backdrop = true;\r\n    } else if (options.backdrop === false || options.backdrop === 'false') {\r\n      newOptions.backdrop = false;\r\n    }\r\n  }\r\n\r\n  if (options.animate === false) {\r\n    newOptions.fade = false;\r\n  }\r\n\r\n  if (options.closeButton === false) {\r\n    newOptions.showHeaderClose = false;\r\n  }\r\n\r\n  if (options.swapButtonOrder) {\r\n    newOptions.swapButtonOrder = true;\r\n  }\r\n\r\n  if (options.centerVertical) {\r\n    newOptions.center = true;\r\n  }\r\n\r\n  if (options.scrollable !== true) {\r\n    newOptions.scrollable = false;\r\n  }\r\n\r\n  if (type == 'alert') {\r\n    if (options.buttons && options.buttons.ok) {\r\n      newOptions.closeButton = {};\r\n\r\n      if (options.buttons.ok.label) {\r\n        newOptions.closeButton.label = options.buttons.ok.label\r\n      }\r\n\r\n      if (options.buttons.ok.className) {\r\n        newOptions.closeButton.style = options.buttons.ok.className.replace('btn-', '');\r\n      }\r\n    }\r\n  } else if (type == 'confirm') {\r\n    if (options.buttons && options.buttons.confirm) {\r\n      newOptions.okButton = {};\r\n\r\n      if (options.buttons.confirm.label) {\r\n        newOptions.okButton.label = options.buttons.confirm.label;\r\n      }\r\n\r\n      if (options.buttons.confirm.className) {\r\n        newOptions.okButton.style = options.buttons.confirm.className.replace('btn-', '');\r\n      }\r\n    }\r\n\r\n    if (options.buttons && options.buttons.cancel) {\r\n      newOptions.closeButton = {};\r\n\r\n      if (options.buttons.cancel.label) {\r\n        newOptions.closeButton.label = options.buttons.cancel.label;\r\n      }\r\n\r\n      if (options.buttons.cancel.className) {\r\n        newOptions.closeButton.style = options.buttons.cancel.className.replace('btn-', '');\r\n      }\r\n    }\r\n  } else if (type == 'prompt') {\r\n    if (options.buttons && options.buttons.confirm) {\r\n      newOptions.okButton = {};\r\n\r\n      if (options.buttons.confirm.label) {\r\n        newOptions.okButton.label = options.buttons.confirm.label;\r\n      }\r\n\r\n      if (options.buttons.confirm.className) {\r\n        newOptions.okButton.style = options.buttons.confirm.className.replace('btn-', '');\r\n      }\r\n    }\r\n\r\n    if (options.buttons && options.buttons.cancel) {\r\n      newOptions.closeButton = {};\r\n\r\n      if (options.buttons.cancel.label) {\r\n        newOptions.closeButton.label = options.buttons.cancel.label;\r\n      }\r\n\r\n      if (options.buttons.cancel.className) {\r\n        newOptions.closeButton.style = options.buttons.cancel.className.replace('btn-', '');\r\n      }\r\n    }\r\n\r\n    if (options.inputType == 'select') {\r\n      newOptions.input =\r\n        `<select\r\n          class=\"form-select\"\r\n          ${options.multiple ? 'multiple' : ''}\r\n          ${options.required ? 'required' : ''}\r\n        >\r\n          ${options.inputOptions.map((option) => `\r\n            <option\r\n              value=\"${option.value || ''}\"\r\n              ${options.value == option.value ? 'selected' : ''}\r\n            >${option.text || option.value}</option>\r\n          `).join('')}\r\n        </select>`;\r\n    } else if (options.inputType == 'checkbox' || options.inputType == 'radio') {\r\n      newOptions.input =\r\n        options.inputOptions.map((option, index) =>\r\n          `<div class=\"form-check\">\r\n            <input\r\n              id=\"modbox-input-${index}\"\r\n              type=\"${options.inputType}\"\r\n              name=\"modbox-input-name\"\r\n              value=\"${option.value || ''}\"\r\n              ${options.value == option.value ? 'checked' : ''}\r\n            >\r\n            <label class=\"form-check-label\" for=\"modbox-input-${index}\">\r\n              ${option.text || option.value}\r\n            </label>\r\n          </div>`\r\n        ).join('');\r\n    } else if (options.inputType == 'textarea') {\r\n      newOptions.input =\r\n        `<textarea\r\n          class=\"form-control\"\r\n          ${options.rows ? `rows=\"${options.rows}\"` : ''}\r\n          ${options.placeholder ? `placeholder=\"${options.placeholder}\"` : ''}\r\n          ${options.autocomplete ? `autocomplete=\"${options.autocomplete}\"` : ''}\r\n          ${options.minlength ? `minlength=\"${options.minlength}\"` : ''}\r\n          ${options.maxlength ? `maxlength=\"${options.maxlength}\"` : ''}\r\n          ${options.required ? 'required' : ''}\r\n        >${options.value || ''}</textarea>`;\r\n    } else {\r\n      newOptions.input =\r\n        `<input\r\n          type=\"${options.inputType}\"\r\n          class=\"${options.inputType == 'range' ? 'form-range' : 'form-control'}\"\r\n          value=\"${options.value || ''}\"\r\n          ${options.placeholder ? `placeholder=\"${options.placeholder}\"` : ''}\r\n          ${options.autocomplete ? `autocomplete=\"${options.autocomplete}\"` : ''}\r\n          ${options.minlength ? `minlength=\"${options.minlength}\"` : ''}\r\n          ${options.maxlength ? `maxlength=\"${options.maxlength}\"` : ''}\r\n          ${options.min ? `min=\"${options.min}\"` : ''}\r\n          ${options.max ? `max=\"${options.max}\"` : ''}\r\n          ${options.step ? `step=\"${options.step}\"` : ''}\r\n          ${options.pattern ? `pattern=\"${options.pattern}\"` : ''}\r\n          ${options.required ? 'required' : ''}\r\n        >`;\r\n    }\r\n\r\n    newOptions.body = `\r\n      ${options.message ? `<p>${options.message}</p>` : ''}\r\n      ${newOptions.input}\r\n    `.trim();\r\n  }\r\n\r\n  return newOptions;\r\n}\r\n\r\ndmx.Actions({\r\n\r\n  'bootbox.alert': function(options) {\r\n    return modbox.alert(dmx.getModboxOptions('alert', this.parse(options)));\r\n  },\r\n\r\n  'bootbox.info': function(options) {\r\n    return modbox.info(dmx.getModboxOptions('alert', this.parse(options)));\r\n  },\r\n\r\n  'bootbox.success': function(options) {\r\n    return modbox.success(dmx.getModboxOptions('alert', this.parse(options)));\r\n  },\r\n\r\n  'bootbox.warning': function(options) {\r\n    return modbox.warning(dmx.getModboxOptions('alert', this.parse(options)));\r\n  },\r\n\r\n  'bootbox.danger': function(options) {\r\n    return modbox.danger(dmx.getModboxOptions('alert', this.parse(options)));\r\n  },\r\n\r\n  'bootbox.confirm': function(options) {\r\n    options = Object.assign({}, options);\r\n\r\n    const condition = {\r\n        'then': options.then,\r\n        'else': options.else\r\n    };\r\n\r\n    delete options.then;\r\n    delete options.else;\r\n    \r\n    return modbox.confirm(dmx.getModboxOptions('confirm', this.parse(options))).then(() => {\r\n      if (condition.then) {\r\n        return this._exec(condition.then).then(() => true);\r\n      }\r\n      return true;\r\n    }).catch(() => {\r\n      if (condition.else) {\r\n        return this._exec(condition.else).then(() => false);\r\n      }\r\n      return false;\r\n    });\r\n  },\r\n\r\n  'bootbox.prompt': function(_options) {\r\n    const options = dmx.extend(true, {\r\n      okButton: {\r\n        label: 'OK',\r\n        style: 'primary'\r\n      },\r\n      closeButton: {\r\n        label: 'Close',\r\n        style: 'secondary'\r\n      }\r\n    }, dmx.getModboxOptions('prompt', this.parse(_options)), {\r\n      destroyOnClose: true,\r\n      defaultButton: false,\r\n      buttons: []\r\n    });\r\n\r\n    return new Promise(resolve => {\r\n      const box = new modbox(options);\r\n      const inputEl = box.modalEl.querySelector('input,select,textarea');\r\n\r\n      if (inputEl.type == 'radio') {\r\n        inputEl.checked = true;\r\n      }\r\n\r\n      options.okButton.close = false;\r\n      options.okButton.callback = () => {\r\n        const isValid = inputEl ? inputEl.reportValidity() : true;\r\n\r\n        if (isValid) {\r\n          if (inputEl.nodeName == 'SELECT' && inputEl.multiple) {\r\n            resolve(Array.from(inputEl.selectedOptions).map(option => option.value));\r\n          } else if (inputEl.type == 'checkbox') {\r\n            const checkedEl = box.modalEl.querySelectorAll('input:checked');\r\n            resolve(Array.from(checkedEl).map(el => el.value));\r\n          } else if (inputEl.type == 'radio') {\r\n            const checkedEl = box.modalEl.querySelector('input:checked');\r\n            resolve(checkedEl.value);\r\n          } else {\r\n            resolve(inputEl.value);\r\n          }\r\n\r\n          box.hide();\r\n        }\r\n      };\r\n\r\n      const okBtn = box.addButton(options.okButton);\r\n      const closeBtn = box.addButton(options.closeButton);\r\n\r\n      if (inputEl && inputEl.nodeName == 'INPUT') {\r\n        inputEl.addEventListener('keyup', (event) => {\r\n          if (event.key === 'Enter') {\r\n            okBtn.click();\r\n          }\r\n        })\r\n      }\r\n\r\n      box.addEvent('hide', () => {\r\n        resolve(null);\r\n      });\r\n\r\n      box.show();\r\n    });\r\n  }\r\n\r\n});\r\n","dmx.Component('bootbox', {\r\n\r\n  methods: {\r\n    alert: function(options) {\r\n      return modbox.alert(dmx.getModboxOptions('alert', options));\r\n    },\r\n\r\n    info: function(options) {\r\n      return modbox.info(dmx.getModboxOptions('alert', options));\r\n    },\r\n  \r\n    success: function(options) {\r\n      return modbox.success(dmx.getModboxOptions('alert', options));\r\n    },\r\n  \r\n    warning: function(options) {\r\n      return modbox.warning(dmx.getModboxOptions('alert', options));\r\n    },\r\n  \r\n    danger: function(options) {\r\n      return modbox.danger(dmx.getModboxOptions('alert', options));\r\n    },\r\n  }\r\n\r\n});"]}